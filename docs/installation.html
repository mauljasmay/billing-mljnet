<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Installation Guide | Gembok Bill</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-3 col-xl-2 px-0 sidebar">
                <div class="d-flex flex-column p-3">
                    <a href="index.html" class="d-flex align-items-center mb-4 text-decoration-none">
                        <i class="bi bi-shield-lock-fill me-2" style="font-size: 1.5rem; color: var(--primary);"></i>
                        <span class="fs-4 fw-bold" style="color: var(--secondary);">Gembok Bill</span>
                    </a>
                    <hr>
                    <ul class="nav nav-pills flex-column">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <i class="bi bi-house me-2"></i>Beranda
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="installation.html" class="nav-link active">
                                <i class="bi bi-download me-2"></i>Instalasi
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="bi bi-gear me-2"></i>Konfigurasi
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="bi bi-code-slash me-2"></i>Development
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="bi bi-question-circle me-2"></i>Bantuan
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-lg-9 col-xl-10 content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h1 class="fw-bold">Panduan Instalasi</h1>
                    <a href="../DEPLOYMENT_GUIDE.md" class="btn btn-outline-primary">
                        <i class="bi bi-file-text me-2"></i>Lihat Dokumen Lengkap
                    </a>
                </div>

                <!-- Requirements -->
                <section class="mb-5">
                    <h2 class="section-title">Prasyarat Sistem</h2>
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="card requirement-card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="bi bi-nodejs text-success me-2"></i>Node.js
                                    </h5>
                                    <p class="card-text">Versi minimal 14.0.0 atau yang lebih baru. Diperlukan untuk menjalankan aplikasi backend.</p>
                                    <span class="badge bg-success">Wajib</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card requirement-card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="bi bi-terminal text-primary me-2"></i>npm
                                    </h5>
                                    <p class="card-text">Versi minimal 6.0.0 atau yang lebih baru. Digunakan untuk manajemen paket dan dependensi.</p>
                                    <span class="badge bg-success">Wajib</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card requirement-card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="bi bi-database text-info me-2"></i>Database
                                    </h5>
                                    <p class="card-text">SQLite untuk development atau MySQL untuk production environment.</p>
                                    <span class="badge bg-warning">Opsional</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card requirement-card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="bi bi-whatsapp text-success me-2"></i>WhatsApp Business
                                    </h5>
                                    <p class="card-text">Nomor WhatsApp Business untuk fitur gateway dan notifikasi otomatis.</p>
                                    <span class="badge bg-warning">Opsional</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Installation Steps -->
                <section class="mb-5">
                    <h2 class="section-title">Langkah Instalasi</h2>
                    <div class="row g-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="step-number">1</div>
                                        <h5 class="mb-0">Clone Repository</h5>
                                    </div>
                                    <p>Unduh kode sumber dari repository GitHub resmi.</p>
                                    <div class="bg-dark text-light rounded-3 p-4">
                                        <pre><code class="language-bash">git clone https://github.com/alijayanet/gembok-bill.git
cd gembok-bill</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="step-number">2</div>
                                        <h5 class="mb-0">Instal Dependensi</h5>
                                    </div>
                                    <p>Instal semua paket dan dependensi yang diperlukan.</p>
                                    <div class="bg-dark text-light rounded-3 p-4">
                                        <pre><code class="language-bash">npm install</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="step-number">3</div>
                                        <h5 class="mb-0">Konfigurasi Environment</h5>
                                    </div>
                                    <p>Buat file konfigurasi environment dari template yang tersedia.</p>
                                    <div class="bg-dark text-light rounded-3 p-4">
                                        <pre><code class="language-bash">cp .env.example .env
nano .env  # atau editor favorit Anda</code></pre>
                                    </div>
                                    <p class="mt-3">Edit file <code>.env</code> dengan konfigurasi yang sesuai:</p>
                                    <ul>
                                        <li><strong>Database Configuration</strong>: Sesuaikan dengan database Anda</li>
                                        <li><strong>WhatsApp Settings</strong>: Nomor admin dan path sesi</li>
                                        <li><strong>Mikrotik Credentials</strong>: Akses ke router Mikrotik</li>
                                        <li><strong>GenieACS Settings</strong>: URL dan kredensial GenieACS</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="step-number">4</div>
                                        <h5 class="mb-0">Inisialisasi Database</h5>
                                    </div>
                                    <p>Jalankan script setup untuk membuat struktur database dan data awal.</p>
                                    <div class="bg-dark text-light rounded-3 p-4">
                                        <pre><code class="language-bash">npm run setup</code></pre>
                                    </div>
                                    <div class="alert alert-info mt-3">
                                        <i class="bi bi-info-circle me-2"></i>
                                        <strong>Penting:</strong> Langkah ini wajib dilakukan sebelum menjalankan aplikasi untuk pertama kali.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="step-number">5</div>
                                        <h5 class="mb-0">Jalankan Aplikasi</h5>
                                    </div>
                                    <p>Untuk production:</p>
                                    <div class="bg-dark text-light rounded-3 p-4 mb-3">
                                        <pre><code class="language-bash">npm start</code></pre>
                                    </div>
                                    <p>Untuk development (dengan auto-reload):</p>
                                    <div class="bg-dark text-light rounded-3 p-4">
                                        <pre><code class="language-bash">npm run dev</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Post Installation -->
                <section class="mb-5">
                    <h2 class="section-title">Pasca Instalasi</h2>
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="bi bi-shield-check text-success me-2"></i>Verifikasi Instalasi
                                    </h5>
                                    <p>Pastikan aplikasi berjalan dengan benar dengan mengakses:</p>
                                    <ul>
                                        <li>Admin Dashboard: <code>http://localhost:3000</code></li>
                                        <li>WhatsApp Gateway: Periksa koneksi di terminal</li>
                                        <li>Database: Verifikasi struktur tabel</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="bi bi-arrow-repeat text-primary me-2"></i>Pemeliharaan
                                    </h5>
                                    <p>Untuk pemeliharaan rutin:</p>
                                    <ul>
                                        <li>Update dependensi: <code>npm update</code></li>
                                        <li>Backup database secara berkala</li>
                                        <li>Monitor log aplikasi</li>
                                        <li>Restart service jika diperlukan</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Troubleshooting -->
                <section>
                    <h2 class="section-title">Troubleshooting</h2>
                    <div class="accordion" id="troubleshootingAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingOne">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                                    <i class="bi bi-database me-2"></i>Error Database "no such column"
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#troubleshootingAccordion">
                                <div class="accordion-body">
                                    <p>Jika muncul error seperti "SQLITE_ERROR: no such column: invoice_type", jalankan migrasi database:</p>
                                    <div class="bg-dark text-light rounded-3 p-4">
                                        <pre><code class="language-bash">npm run run-sql-migrations</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                                    <i class="bi bi-whatsapp me-2"></i>Error Koneksi WhatsApp
                                </button>
                            </h2>
                            <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                                <div class="accordion-body">
                                    <p>Jika mengalami masalah koneksi WhatsApp:</p>
                                    <ol>
                                        <li>Pastikan nomor WhatsApp yang digunakan belum terdaftar di device lain</li>
                                        <li>Hapus folder sesi WhatsApp: <code>rm -rf ./whatsapp-session</code></li>
                                        <li>Restart aplikasi dan scan ulang QR code</li>
                                        <li>Periksa versi Baileys: <code>npm run check-whatsapp-version</code></li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingThree">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
                                    <i class="bi bi-exclamation-triangle me-2"></i>Port Sudah Digunakan
                                </button>
                            </h2>
                            <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                                <div class="accordion-body">
                                    <p>Jika port sudah digunakan aplikasi lain:</p>
                                    <ol>
                                        <li>Ubah port di file <code>.env</code></li>
                                        <li>Gunakan port yang tersedia, misalnya 3001, 3002, dst.</li>
                                        <li>Restart aplikasi setelah perubahan</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>